#############
Kubernetes   
#############

* `Kubernetes中文手册 <https://www.kubernetes.org.cn/docs>`_

***********************
每天5分钟玩转容器技术  
***********************

Docker 
=======


* `1. 写在最前面 <https://blog.csdn.net/CloudMan6/article/details/70054393>`_
* `2. 容器生态系统  <https://blog.csdn.net/cloudman6/article/details/70162855>`_
* `3. 容器生态系统 (续) <https://blog.csdn.net/cloudman6/article/details/70194931>`_  
* `4. 运行第一个容器 <https://blog.csdn.net/cloudman6/article/details/70227455>`_
* `5. 视频 <https://blog.csdn.net/cloudman6/article/details/70296388>`_
* `6. 容器 What, Why, How  <https://blog.csdn.net/cloudman6/article/details/70482298>`_
* `7. Docker 架构详解 <https://blog.csdn.net/cloudman6/article/details/70763952>`_
* `8. Docker 组件如何协作 <https://blog.csdn.net/cloudman6/article/details/70857585>`_
* `9. 最小的镜像 <https://blog.csdn.net/cloudman6/article/details/70992337>`_
* `10. base镜像 <https://blog.csdn.net/cloudman6/article/details/71105101>`_
* `11. 镜像的分层结构 <https://blog.csdn.net/CloudMan6/article/details/71159794>`_
* `12. 构建镜像 <https://blog.csdn.net/CloudMan6/article/details/71336283>`_
* `13. Dockerfile 构建镜像 <https://blog.csdn.net/CloudMan6/article/details/71445478>`_
* `14. 镜像的缓存特性 <https://blog.csdn.net/CloudMan6/article/details/71600853>`_
* `15. 调试 Dockerfile <https://blog.csdn.net/CloudMan6/article/details/72049313>`_
* `16. Dockerfile 常用指令 <https://blog.csdn.net/CloudMan6/article/details/72353838>`_
* `18. 镜像命名的最佳实践 <https://blog.csdn.net/CloudMan6/article/details/72603130>`_
* `19. 使用公共 Registry <https://blog.csdn.net/CloudMan6/article/details/72667956>`_
* `20. 搭建本地 Registry <https://blog.csdn.net/CloudMan6/article/details/72722916>`_
* `21. Docker 镜像小结 <https://blog.csdn.net/CloudMan6/article/details/72783603>`_
* `22. 如何运行容器？ <https://blog.csdn.net/CloudMan6/article/details/72811183>`_
* `23. 两种进入容器的方法 <https://blog.csdn.net/CloudMan6/article/details/72831143>`_
* `24. 运行容器的最佳实践 <https://blog.csdn.net/CloudMan6/article/details/72862262>`_
* `25. 容器常用操作 <https://blog.csdn.net/CloudMan6/article/details/72884463>`_
* `26. 一张图搞懂容器所有操作 <https://blog.csdn.net/CloudMan6/article/details/72911204>`_
* `27. 限制容器对内存的使用  <https://blog.csdn.net/CloudMan6/article/details/73065623>`_
* `28. 限制容器对CPU的使用 <https://blog.csdn.net/CloudMan6/article/details/73195469>`_
* `29. 限制容器的 Block IO <https://blog.csdn.net/CloudMan6/article/details/73275235>`_
* `30. 实现容器的底层技术 <https://blog.csdn.net/CloudMan6/article/details/73441688>`_
* `31. none 和 host 网络的适用场景 <https://blog.csdn.net/CloudMan6/article/details/73490335>`_
* `32. 学容器必须懂 bridge 网络  <https://blog.csdn.net/CloudMan6/article/details/73610507>`_
* `33. 如何自定义容器网络？ <https://blog.csdn.net/CloudMan6/article/details/73718953>`_
* `34. 理解容器之间的连通性 <https://blog.csdn.net/CloudMan6/article/details/73825691>`_
* `35. 容器间通信的三种方式 <https://blog.csdn.net/CloudMan6/article/details/73928932>`_
* `36. 容器如何访问外部世界？ <https://blog.csdn.net/CloudMan6/article/details/74157891>`_
* `37. 外部世界如何访问容器？ <https://blog.csdn.net/CloudMan6/article/details/74359616>`_
* `38. Docker 的两类存储资源 <https://blog.csdn.net/CloudMan6/article/details/74590058>`_
* `39. Data Volume 之 bind mount <https://blog.csdn.net/CloudMan6/article/details/74896920>`_
* `40. docker managed volume <https://blog.csdn.net/CloudMan6/article/details/74999509>`_
* `41. 如何共享数据？ <https://blog.csdn.net/CloudMan6/article/details/75093632>`_
* `42. 用 volume container 共享数据 <https://blog.csdn.net/CloudMan6/article/details/75194862>`_
* `43. data-packed volume container <https://blog.csdn.net/CloudMan6/article/details/75331672>`_
* `44. volume 生命周期管理 <https://blog.csdn.net/CloudMan6/article/details/75578915>`_
* `45. 安装 Docker Machine <https://blog.csdn.net/CloudMan6/article/details/75810234>`_
* `46. 创建 Machine <https://blog.csdn.net/CloudMan6/article/details/76100816>`_
* `47. 管理 Machine <https://blog.csdn.net/CloudMan6/article/details/76223476>`_
* `48. 跨主机网络概述 <https://blog.csdn.net/CloudMan6/article/details/76383702>`_
* `49. 准备 overlay 网络实验环境 <https://blog.csdn.net/CloudMan6/article/details/76557792>`_
* `50. 创建 overlay 网络 <https://blog.csdn.net/CloudMan6/article/details/76638952>`_
* `51. 在 overlay 中运行容器 <https://blog.csdn.net/CloudMan6/article/details/76765159>`_
* `52. overlay 如何实现跨主机通信？ <https://blog.csdn.net/CloudMan6/article/details/76889979>`_
* `53. overlay 是如何隔离的？ <https://blog.csdn.net/CloudMan6/article/details/77073752>`_
* `54. 准备 macvlan 环境 <https://blog.csdn.net/CloudMan6/article/details/77140712>`_
* `55. 创建 macvlan 网络 <https://blog.csdn.net/CloudMan6/article/details/77186548>`_
* `56. macvlan 网络结构分析 <https://blog.csdn.net/CloudMan6/article/details/77338515>`_
* `57. macvlan 网络隔离和连通 <https://blog.csdn.net/CloudMan6/article/details/77430395>`_
* `58. flannel 概述 <https://blog.csdn.net/CloudMan6/article/details/77481720>`_
* `59. 安装配置 flannel <https://blog.csdn.net/CloudMan6/article/details/77540088>`_
* `60. 在 Docker 中使用 flannel <https://blog.csdn.net/CloudMan6/article/details/77622313>`_
* `61. flannel 的连通与隔离 <https://blog.csdn.net/CloudMan6/article/details/77676572>`_
* `62. 如何使用 flannel host-gw backend？ <https://blog.csdn.net/CloudMan6/article/details/77744631>`_
* `63. 如何使用 Weave 网络？ <https://blog.csdn.net/CloudMan6/article/details/77825734>`_
* `64. Weave 网络结构分析 <https://blog.csdn.net/CloudMan6/article/details/77856911>`_
* `65. 容器在 Weave 中如何通信和隔离？ <https://blog.csdn.net/CloudMan6/article/details/77886886>`_
* `66. Weave 如何与外网通信？ <https://blog.csdn.net/CloudMan6/article/details/77921063>`_
* 67
* 68
* 69
* 70
* 71
* 72
* 73
* 74
* 75
* 76
* 77
* 78
* 79
* 80
* 81
* 82
* 83
* 84
* 85
* 86
* 87
* 88
* 89
* 90
* 91
* 92
* 93
* 94
* 95
* 96
* 97
* 98
* 99
* 100
* 101
* 102
* 103
* 104
* 105
* 106
* 107
* 108
* 109
* 110
* 111
* 112
* 113

K8s  
=====



* `114. 学习 Kubernetes 的 Why 和 How  <https://blog.csdn.net/CloudMan6/article/details/78954441>`_
* `115. 五秒创建 k8s 集群 <https://blog.csdn.net/cloudman6/article/details/78973949>`_
* `116. k8s 核心功能 <https://blog.csdn.net/cloudman6/article/details/78997613>`_
* `117. k8s 重要概念  <https://blog.csdn.net/cloudman6/article/details/79014649>`_
* `118. 部署 k8s Cluster（上） <https://blog.csdn.net/cloudman6/article/details/79036876>`_
* `119. 部署 k8s Cluster（下） <https://blog.csdn.net/cloudman6/article/details/79055050>`_
* `120. Kubernetes 架构（上） <https://blog.csdn.net/cloudman6/article/details/79070461>`_
* `121. Kubernetes 架构（下） <https://blog.csdn.net/cloudman6/article/details/79091574>`_
* `122. 通过例子理解 k8s 架构 <https://blog.csdn.net/cloudman6/article/details/79118086>`_
* 123
* 124
* 125
* 126
* 127
* 128
* 129
* 130
* 131
* 132
* 133
* 134
* 135
* 136
* 137
* 138
* 139
* 140
* 141
* 142
* 143
* 144
* 145
* 146
* 147
* 148
* 149
* 150
* 151
* 152
* 153
* 154
* 155
* 156
* 157
* 158
* 159
* 160
* 161
* 162
* 163
* 164
* 165
* 166
* 167
* 168
* 169
* 170
* 171
* 172
* 173
* 174
* 175
* 176
* 177
* 178
* 179
* `180. Kubernetes 集群日志管理 <https://coolshell.cn/articles/5426.html>`_

  

.. code-block:: sh


    kubeadm token list 

    # get --discovery-token-ca-cert-hash
    openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2>/dev/null | openssl dgst -sha256 -hex | sed 's/^.* //'





************
搭建
************

* `googlecontainer <https://hub.docker.com/u/googlecontainer/>`_

---------------------------------

* `install-kubeadm <https://kubernetes.io/docs/setup/independent/install-kubeadm/>`_

* `kubeadm安装kubernetes集群 <http://blog.51cto.com/lullaby/2150610>`_

* `通过docker hub 下载 <https://mritd.me/2016/10/29/set-up-kubernetes-cluster-by-kubeadm/>`_

------------

* `安装部署 Kubernetes 集群  <https://www.cnblogs.com/Leo_wl/p/8511902.html>`_
* `kubeadm安装kubernetes集群 <http://blog.51cto.com/lullaby/2150610>`_
* `【kubernetes/k8s 部署】minikube与kubernetes搭建 2017.08.16 <https://blog.csdn.net/zhonglinzhang/article/details/77223027>`_

* `使用Kubeadm快速搭建Kubernetes(docker) <https://blog.csdn.net/CSDN_duomaomao/article/details/73825839>`_
* `使用kubeadm安装Kubernetes v1.10以及常见问题解答 <https://www.kubernetes.org.cn/3805.html>`_

* `Kubernetes in Vagrant with kubeadm <https://medium.com/@lizrice/kubernetes-in-vagrant-with-kubeadm-21979ded6c63>`_

* `k8s学习笔记（一） <https://www.cnblogs.com/silvermagic/p/9110882.html>`_
* `Kubernetes Handbook <https://www.ctolib.com/docs//sfile/kubernetes-handbook/index.html>`_

测试
=======

.. code-block:: yaml

    #################
    # busybox.yaml
    #################
    apiVersion: v1
    kind: Pod
    metadata:
      name: busybox
      namespace: default
    spec:
      containers:
      - image: busybox
	command:
	  - sleep
	  - "3600"
	imagePullPolicy: IfNotPresent
	name: busybox
      restartPolicy: Always

.. code-block:: sh

   sudo kubectl create -f ./busybox.yaml
   sudo kubectl get rc 
   sudo kubectl get pods 
   sudo kubectl describe pod mysql

******
FAQ   
******


问题:

.. code-block:: sh

    ########################3
    # Centos7
    ########################3

    #sudo kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/v0.10.0/Documentation/kube-flannel.yml
    $ sudo kubectl apply -f ./kube-flannel.yml
    unable to recognize "./kube-flannel.yml": Get http://localhost:8080/api?timeout=32s: dial tcp [::1]:8080: connect: connection refused
    unable to recognize "./kube-flannel.yml": Get http://localhost:8080/api?timeout=32s: dial tcp [::1]:8080: connect: connection refused
    unable to recognize "./kube-flannel.yml": Get http://localhost:8080/api?timeout=32s: dial tcp [::1]:8080: connect: connection refused
    unable to recognize "./kube-flannel.yml": Get http://localhost:8080/api?timeout=32s: dial tcp [::1]:8080: connect: connection refused
    unable to recognize "./kube-flannel.yml": Get http://localhost:8080/api?timeout=32s: dial tcp [::1]:8080: connect: connection refused
    The connection to the server localhost:8080 was refused - did you specify the right host or port

解决: 需要开启 api server 代理端口：

* https://www.oschina.net/question/574036_2271046
* `Kubernetes核心原理（一）之API Server <https://yq.aliyun.com/articles/149595>`_

.. code-block:: sh

    # 查看端口是否代理：
    $ curl localhost:8080/api

    # 开启端口代理：
    $ kubectl proxy --port=8080 &

